{"ast":null,"code":"var _jsxFileName = \"D:\\\\react-myprojects\\\\hrms-airtable\\\\src\\\\components\\\\ConvertEmpEmail.js\";\nimport React, { useState } from \"react\";\nimport { Button, Icon, TextField, Paper, Typography, Divider, MenuItem } from \"@material-ui/core\";\nimport { Box, Heading } from \"@chakra-ui/react\";\nimport { Controller, useForm } from \"react-hook-form\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { AlertDialogBox } from \"../helpers/AlertDialogBox\";\nimport { useEmployees } from \"./employees/useEmployees\";\nimport { useUpdateEmployees } from \"./employees/useUpdateEmployees\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst initial_state = {\n  name: \"\",\n  email: \"\",\n  newemail: \"\",\n  loginpw: \"\"\n};\n\nconst ConvertEmpEmail = () => {\n  const classes = useStyles(); //const toast = useCustomToast();\n\n  const {\n    employees\n  } = useEmployees();\n  const updateEmployee = useUpdateEmployees();\n  const [state, setState] = useState(initial_state);\n  const [isExit, setIsExit] = useState(false);\n  const [isAlertOpen, setIsAlertOpen] = useState(false); //const [loginLevel, setLoginLevel] = useRecoilState(loginLevelState);\n\n  const {\n    handleSubmit,\n    control,\n    setValue\n  } = useForm({\n    defaultValues: { ...initial_state\n    }\n  }); //const initialValues = Object.values(initial_state).join(\"\");\n  //const {\n  //editEmployeeID,\n  //employees_loading,\n  //deleteEmployee,\n  //loadEmployees,\n  //setEditEmployeeID,\n  //setIsEditingOn,\n  //setIsEditingOff,\n  //resetSingleEmployee,\n  //resetEmployees,\n  //getSingleEmployee,\n  //} = useEmployeesContext();\n\n  const handleAlertOpen = () => {\n    setIsAlertOpen(true);\n  };\n\n  const handleAlertClose = () => {\n    setIsAlertOpen(false);\n  };\n\n  const handleOnConfirm = data => {\n    console.log(\"confirm\", data); //const { id, period, empid } = deletestate;\n    //delete allows detls\n    //console.log(\"allowsdetls\", dailyallowsdetls);\n    //dailyallowsdetls\n    //.filter((f) => f.empid === empid)\n    //.forEach((rec) => {\n    // if (rec.period === period && rec.empid === empid) {\n    //console.log(\"del id\", rec.id);\n    //  deleteDailyAllowsDetls(rec.id);\n    // }\n    //});\n    //delete daily allows\n    //deleteDailyAllows(id);\n    // toast({\n    //   title: `Site Allowances has been successfully deleted!`,\n    //   status: \"warning\",\n    // });\n  };\n\n  const handleSearchEmail = data => {\n    console.log(\"search data\", data);\n    const currentemail = employees.filter(r => r.name === data).map(rec => rec.email);\n    console.log(\"searchemail\", currentemail[0]);\n    setValue(\"email\", currentemail[0]);\n  };\n\n  const onSubmit = data => {\n    const {\n      name\n    } = data;\n    const emp = employees && employees.filter(rec => rec.name === name);\n    console.log(\"exist\", emp);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(Paper, {\n      className: classes.root,\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h5\",\n        component: \"h3\",\n        children: \"EMPLOYEE EMAIL CONVERSION\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit(onSubmit),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(Controller, {\n            name: \"name\",\n            control: control,\n            defaultValue: state.name,\n            render: ({\n              field: {\n                onChange,\n                value\n              },\n              fieldState: {\n                error\n              }\n            }) => {\n              return /*#__PURE__*/_jsxDEV(TextField, {\n                label: \"Name\",\n                id: \"margin-normal\",\n                name: \"name\" //value={value}\n                ,\n                defaultValue: state.name,\n                className: classes.textField,\n                onChange: e => {\n                  onChange(e.target.value);\n                  handleSearchEmail(e.target.value);\n                },\n                error: !!error,\n                helperText: error ? error.message : null,\n                select: true,\n                children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n                  value: \"\",\n                  children: \"None\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 130,\n                  columnNumber: 21\n                }, this), employees && employees.filter(r => !r.hasresigned).sort((a, b) => a.name > b.name ? 1 : b.name > a.name ? -1 : 0).map(rec => {\n                  return /*#__PURE__*/_jsxDEV(MenuItem, {\n                    value: rec.name,\n                    children: rec.name\n                  }, rec.id, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 139,\n                    columnNumber: 29\n                  }, this);\n                })]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 115,\n                columnNumber: 19\n              }, this);\n            },\n            rules: {\n              required: \"Name required\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(Controller, {\n            name: \"email\",\n            control: control,\n            defaultValue: state.email,\n            render: ({\n              field: {\n                onChange,\n                value\n              },\n              fieldState: {\n                error\n              }\n            }) => {\n              return /*#__PURE__*/_jsxDEV(TextField, {\n                label: \"Current Email\",\n                id: \"margin-normal-email\",\n                name: \"email\",\n                type: \"email\",\n                value: value,\n                defaultValue: state.email,\n                className: classes.textField,\n                onChange: onChange,\n                error: !!error,\n                helperText: error ? error.message : null\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 160,\n                columnNumber: 19\n              }, this);\n            },\n            rules: {\n              required: \"Email is required\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(Controller, {\n            name: \"newemail\",\n            control: control,\n            defaultValue: state.newemail,\n            render: ({\n              field: {\n                onChange,\n                value\n              },\n              fieldState: {\n                error\n              }\n            }) => {\n              return /*#__PURE__*/_jsxDEV(TextField, {\n                label: \"New Email\",\n                id: \"margin-normal-email\",\n                name: \"newemail\",\n                type: \"email\",\n                defaultValue: state.newemail,\n                className: classes.textField,\n                onChange: onChange,\n                error: !!error,\n                helperText: error ? error.message : null\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 187,\n                columnNumber: 19\n              }, this);\n            },\n            rules: {\n              required: \"Email is required\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(Controller, {\n            name: \"loginpw\",\n            control: control,\n            defaultValue: state.loginpw,\n            render: ({\n              field: {\n                onChange,\n                value\n              },\n              fieldState: {\n                error\n              }\n            }) => {\n              return /*#__PURE__*/_jsxDEV(TextField, {\n                label: \"Login EMail PW\",\n                id: \"margin-normal-email\",\n                name: \"loginpw\",\n                defaultValue: state.loginpw,\n                className: classes.textField,\n                onChange: onChange,\n                error: !!error,\n                helperText: error ? error.message : null\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 213,\n                columnNumber: 19\n              }, this);\n            },\n            rules: {\n              required: \"Password is required\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            type: \"submit\",\n            variant: \"contained\",\n            color: \"primary\",\n            className: classes.button,\n            onClick: handleSubmit(onSubmit),\n            children: [\"Convert \", /*#__PURE__*/_jsxDEV(Icon, {\n              className: classes.rightIcon,\n              children: \"send\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 237,\n              columnNumber: 23\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 11\n        }, this), isExit && /*#__PURE__*/_jsxDEV(Box, {\n          children: /*#__PURE__*/_jsxDEV(Heading, {\n            size: \"md\",\n            pl: 2,\n            children: \"Warning! This email already existed!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 242,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(AlertDialogBox, {\n          onClose: handleAlertClose,\n          onConfirm: handleOnConfirm,\n          isOpen: isAlertOpen,\n          title: \"Convert Email\",\n          children: /*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Are you sure you want to convert ?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 97,\n    columnNumber: 5\n  }, this);\n};\n\nconst useStyles = makeStyles(theme => ({\n  button: {\n    margin: theme.spacing(1)\n  },\n  leftIcon: {\n    marginRight: theme.spacing(1)\n  },\n  rightIcon: {\n    marginLeft: theme.spacing(1)\n  },\n  iconSmall: {\n    fontSize: 20\n  },\n  root: {\n    padding: theme.spacing(3, 2)\n  },\n  container: {\n    display: \"flex\",\n    flexWrap: \"wrap\"\n  },\n  textField: {\n    marginLeft: theme.spacing(1),\n    marginRight: theme.spacing(1),\n    width: 400\n  }\n}));\nexport default ConvertEmpEmail;","map":{"version":3,"sources":["D:/react-myprojects/hrms-airtable/src/components/ConvertEmpEmail.js"],"names":["React","useState","Button","Icon","TextField","Paper","Typography","Divider","MenuItem","Box","Heading","Controller","useForm","makeStyles","AlertDialogBox","useEmployees","useUpdateEmployees","initial_state","name","email","newemail","loginpw","ConvertEmpEmail","classes","useStyles","employees","updateEmployee","state","setState","isExit","setIsExit","isAlertOpen","setIsAlertOpen","handleSubmit","control","setValue","defaultValues","handleAlertOpen","handleAlertClose","handleOnConfirm","data","console","log","handleSearchEmail","currentemail","filter","r","map","rec","onSubmit","emp","root","field","onChange","value","fieldState","error","textField","e","target","message","hasresigned","sort","a","b","id","required","button","rightIcon","theme","margin","spacing","leftIcon","marginRight","marginLeft","iconSmall","fontSize","padding","container","display","flexWrap","width"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SACEC,MADF,EAEEC,IAFF,EAGEC,SAHF,EAIEC,KAJF,EAKEC,UALF,EAMEC,OANF,EAOEC,QAPF,QAQO,mBARP;AASA,SAASC,GAAT,EAAcC,OAAd,QAA6B,kBAA7B;AACA,SAASC,UAAT,EAAqBC,OAArB,QAAoC,iBAApC;AACA,SAASC,UAAT,QAA2B,0BAA3B;AACA,SAASC,cAAT,QAA+B,2BAA/B;AACA,SAASC,YAAT,QAA6B,0BAA7B;AACA,SAASC,kBAAT,QAAmC,gCAAnC;;AACA,MAAMC,aAAa,GAAG;AACpBC,EAAAA,IAAI,EAAE,EADc;AAEpBC,EAAAA,KAAK,EAAE,EAFa;AAGpBC,EAAAA,QAAQ,EAAE,EAHU;AAIpBC,EAAAA,OAAO,EAAE;AAJW,CAAtB;;AAOA,MAAMC,eAAe,GAAG,MAAM;AAC5B,QAAMC,OAAO,GAAGC,SAAS,EAAzB,CAD4B,CAE5B;;AACA,QAAM;AAAEC,IAAAA;AAAF,MAAgBV,YAAY,EAAlC;AACA,QAAMW,cAAc,GAAGV,kBAAkB,EAAzC;AACA,QAAM,CAACW,KAAD,EAAQC,QAAR,IAAoB3B,QAAQ,CAACgB,aAAD,CAAlC;AACA,QAAM,CAACY,MAAD,EAASC,SAAT,IAAsB7B,QAAQ,CAAC,KAAD,CAApC;AACA,QAAM,CAAC8B,WAAD,EAAcC,cAAd,IAAgC/B,QAAQ,CAAC,KAAD,CAA9C,CAP4B,CAQ5B;;AACA,QAAM;AAAEgC,IAAAA,YAAF;AAAgBC,IAAAA,OAAhB;AAAyBC,IAAAA;AAAzB,MAAsCvB,OAAO,CAAC;AAClDwB,IAAAA,aAAa,EAAE,EAAE,GAAGnB;AAAL;AADmC,GAAD,CAAnD,CAT4B,CAY5B;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,QAAMoB,eAAe,GAAG,MAAM;AAC5BL,IAAAA,cAAc,CAAC,IAAD,CAAd;AACD,GAFD;;AAIA,QAAMM,gBAAgB,GAAG,MAAM;AAC7BN,IAAAA,cAAc,CAAC,KAAD,CAAd;AACD,GAFD;;AAIA,QAAMO,eAAe,GAAIC,IAAD,IAAU;AAChCC,IAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBF,IAAvB,EADgC,CAEhC;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACD,GApBD;;AAsBA,QAAMG,iBAAiB,GAAIH,IAAD,IAAU;AAClCC,IAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2BF,IAA3B;AACA,UAAMI,YAAY,GAAGnB,SAAS,CAC3BoB,MADkB,CACVC,CAAD,IAAOA,CAAC,CAAC5B,IAAF,KAAWsB,IADP,EAElBO,GAFkB,CAEbC,GAAD,IAASA,GAAG,CAAC7B,KAFC,CAArB;AAGAsB,IAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2BE,YAAY,CAAC,CAAD,CAAvC;AACAT,IAAAA,QAAQ,CAAC,OAAD,EAAUS,YAAY,CAAC,CAAD,CAAtB,CAAR;AACD,GAPD;;AASA,QAAMK,QAAQ,GAAIT,IAAD,IAAU;AACzB,UAAM;AAAEtB,MAAAA;AAAF,QAAWsB,IAAjB;AACA,UAAMU,GAAG,GAAGzB,SAAS,IAAIA,SAAS,CAACoB,MAAV,CAAkBG,GAAD,IAASA,GAAG,CAAC9B,IAAJ,KAAaA,IAAvC,CAAzB;AACAuB,IAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBQ,GAArB;AACD,GAJD;;AAMA,sBACE;AAAA,2BACE,QAAC,KAAD;AAAO,MAAA,SAAS,EAAE3B,OAAO,CAAC4B,IAA1B;AAAA,8BACE,QAAC,UAAD;AAAY,QAAA,OAAO,EAAC,IAApB;AAAyB,QAAA,SAAS,EAAC,IAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,eAKE,QAAC,OAAD;AAAA;AAAA;AAAA;AAAA,cALF,eAME;AAAM,QAAA,QAAQ,EAAElB,YAAY,CAACgB,QAAD,CAA5B;AAAA,gCACE;AAAA,iCACE,QAAC,UAAD;AACE,YAAA,IAAI,EAAC,MADP;AAEE,YAAA,OAAO,EAAEf,OAFX;AAGE,YAAA,YAAY,EAAEP,KAAK,CAACT,IAHtB;AAIE,YAAA,MAAM,EAAE,CAAC;AACPkC,cAAAA,KAAK,EAAE;AAAEC,gBAAAA,QAAF;AAAYC,gBAAAA;AAAZ,eADA;AAEPC,cAAAA,UAAU,EAAE;AAAEC,gBAAAA;AAAF;AAFL,aAAD,KAGF;AACJ,kCACE,QAAC,SAAD;AACE,gBAAA,KAAK,EAAC,MADR;AAEE,gBAAA,EAAE,EAAC,eAFL;AAGE,gBAAA,IAAI,EAAC,MAHP,CAIE;AAJF;AAKE,gBAAA,YAAY,EAAE7B,KAAK,CAACT,IALtB;AAME,gBAAA,SAAS,EAAEK,OAAO,CAACkC,SANrB;AAOE,gBAAA,QAAQ,EAAGC,CAAD,IAAO;AACfL,kBAAAA,QAAQ,CAACK,CAAC,CAACC,MAAF,CAASL,KAAV,CAAR;AACAX,kBAAAA,iBAAiB,CAACe,CAAC,CAACC,MAAF,CAASL,KAAV,CAAjB;AACD,iBAVH;AAWE,gBAAA,KAAK,EAAE,CAAC,CAACE,KAXX;AAYE,gBAAA,UAAU,EAAEA,KAAK,GAAGA,KAAK,CAACI,OAAT,GAAmB,IAZtC;AAaE,gBAAA,MAAM,MAbR;AAAA,wCAeE,QAAC,QAAD;AAAU,kBAAA,KAAK,EAAC,EAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAfF,EAgBGnC,SAAS,IACRA,SAAS,CACNoB,MADH,CACWC,CAAD,IAAO,CAACA,CAAC,CAACe,WADpB,EAEGC,IAFH,CAEQ,CAACC,CAAD,EAAIC,CAAJ,KACJD,CAAC,CAAC7C,IAAF,GAAS8C,CAAC,CAAC9C,IAAX,GAAkB,CAAlB,GAAsB8C,CAAC,CAAC9C,IAAF,GAAS6C,CAAC,CAAC7C,IAAX,GAAkB,CAAC,CAAnB,GAAuB,CAHjD,EAKG6B,GALH,CAKQC,GAAD,IAAS;AACZ,sCACE,QAAC,QAAD;AAAuB,oBAAA,KAAK,EAAEA,GAAG,CAAC9B,IAAlC;AAAA,8BACG8B,GAAG,CAAC9B;AADP,qBAAe8B,GAAG,CAACiB,EAAnB;AAAA;AAAA;AAAA;AAAA,0BADF;AAKD,iBAXH,CAjBJ;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF;AAgCD,aAxCH;AAyCE,YAAA,KAAK,EAAE;AAAEC,cAAAA,QAAQ,EAAE;AAAZ;AAzCT;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBADF,eA8CE;AAAA,iCACE,QAAC,UAAD;AACE,YAAA,IAAI,EAAC,OADP;AAEE,YAAA,OAAO,EAAEhC,OAFX;AAGE,YAAA,YAAY,EAAEP,KAAK,CAACR,KAHtB;AAIE,YAAA,MAAM,EAAE,CAAC;AACPiC,cAAAA,KAAK,EAAE;AAAEC,gBAAAA,QAAF;AAAYC,gBAAAA;AAAZ,eADA;AAEPC,cAAAA,UAAU,EAAE;AAAEC,gBAAAA;AAAF;AAFL,aAAD,KAGF;AACJ,kCACE,QAAC,SAAD;AACE,gBAAA,KAAK,EAAC,eADR;AAEE,gBAAA,EAAE,EAAC,qBAFL;AAGE,gBAAA,IAAI,EAAC,OAHP;AAIE,gBAAA,IAAI,EAAC,OAJP;AAKE,gBAAA,KAAK,EAAEF,KALT;AAME,gBAAA,YAAY,EAAE3B,KAAK,CAACR,KANtB;AAOE,gBAAA,SAAS,EAAEI,OAAO,CAACkC,SAPrB;AAQE,gBAAA,QAAQ,EAAEJ,QARZ;AASE,gBAAA,KAAK,EAAE,CAAC,CAACG,KATX;AAUE,gBAAA,UAAU,EAAEA,KAAK,GAAGA,KAAK,CAACI,OAAT,GAAmB;AAVtC;AAAA;AAAA;AAAA;AAAA,sBADF;AAcD,aAtBH;AAuBE,YAAA,KAAK,EAAE;AAAEM,cAAAA,QAAQ,EAAE;AAAZ;AAvBT;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBA9CF,eAyEE;AAAA,iCACE,QAAC,UAAD;AACE,YAAA,IAAI,EAAC,UADP;AAEE,YAAA,OAAO,EAAEhC,OAFX;AAGE,YAAA,YAAY,EAAEP,KAAK,CAACP,QAHtB;AAIE,YAAA,MAAM,EAAE,CAAC;AACPgC,cAAAA,KAAK,EAAE;AAAEC,gBAAAA,QAAF;AAAYC,gBAAAA;AAAZ,eADA;AAEPC,cAAAA,UAAU,EAAE;AAAEC,gBAAAA;AAAF;AAFL,aAAD,KAGF;AACJ,kCACE,QAAC,SAAD;AACE,gBAAA,KAAK,EAAC,WADR;AAEE,gBAAA,EAAE,EAAC,qBAFL;AAGE,gBAAA,IAAI,EAAC,UAHP;AAIE,gBAAA,IAAI,EAAC,OAJP;AAKE,gBAAA,YAAY,EAAE7B,KAAK,CAACP,QALtB;AAME,gBAAA,SAAS,EAAEG,OAAO,CAACkC,SANrB;AAOE,gBAAA,QAAQ,EAAEJ,QAPZ;AAQE,gBAAA,KAAK,EAAE,CAAC,CAACG,KARX;AASE,gBAAA,UAAU,EAAEA,KAAK,GAAGA,KAAK,CAACI,OAAT,GAAmB;AATtC;AAAA;AAAA;AAAA;AAAA,sBADF;AAaD,aArBH;AAsBE,YAAA,KAAK,EAAE;AAAEM,cAAAA,QAAQ,EAAE;AAAZ;AAtBT;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBAzEF,eAmGE;AAAA,iCACE,QAAC,UAAD;AACE,YAAA,IAAI,EAAC,SADP;AAEE,YAAA,OAAO,EAAEhC,OAFX;AAGE,YAAA,YAAY,EAAEP,KAAK,CAACN,OAHtB;AAIE,YAAA,MAAM,EAAE,CAAC;AACP+B,cAAAA,KAAK,EAAE;AAAEC,gBAAAA,QAAF;AAAYC,gBAAAA;AAAZ,eADA;AAEPC,cAAAA,UAAU,EAAE;AAAEC,gBAAAA;AAAF;AAFL,aAAD,KAGF;AACJ,kCACE,QAAC,SAAD;AACE,gBAAA,KAAK,EAAC,gBADR;AAEE,gBAAA,EAAE,EAAC,qBAFL;AAGE,gBAAA,IAAI,EAAC,SAHP;AAIE,gBAAA,YAAY,EAAE7B,KAAK,CAACN,OAJtB;AAKE,gBAAA,SAAS,EAAEE,OAAO,CAACkC,SALrB;AAME,gBAAA,QAAQ,EAAEJ,QANZ;AAOE,gBAAA,KAAK,EAAE,CAAC,CAACG,KAPX;AAQE,gBAAA,UAAU,EAAEA,KAAK,GAAGA,KAAK,CAACI,OAAT,GAAmB;AARtC;AAAA;AAAA;AAAA;AAAA,sBADF;AAYD,aApBH;AAqBE,YAAA,KAAK,EAAE;AAAEM,cAAAA,QAAQ,EAAE;AAAZ;AArBT;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBAnGF,eA6HE;AAAA,iCACE,QAAC,MAAD;AACE,YAAA,IAAI,EAAC,QADP;AAEE,YAAA,OAAO,EAAC,WAFV;AAGE,YAAA,KAAK,EAAC,SAHR;AAIE,YAAA,SAAS,EAAE3C,OAAO,CAAC4C,MAJrB;AAKE,YAAA,OAAO,EAAElC,YAAY,CAACgB,QAAD,CALvB;AAAA,gDAOU,QAAC,IAAD;AAAM,cAAA,SAAS,EAAE1B,OAAO,CAAC6C,SAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAPV;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBA7HF,EAwIGvC,MAAM,iBACL,QAAC,GAAD;AAAA,iCACE,QAAC,OAAD;AAAS,YAAA,IAAI,EAAC,IAAd;AAAmB,YAAA,EAAE,EAAE,CAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBAzIJ;AAAA;AAAA;AAAA;AAAA;AAAA,cANF,eAsJE;AAAA,+BACE,QAAC,cAAD;AACE,UAAA,OAAO,EAAES,gBADX;AAEE,UAAA,SAAS,EAAEC,eAFb;AAGE,UAAA,MAAM,EAAER,WAHV;AAIE,UAAA,KAAK,EAAC,eAJR;AAAA,iCAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AANF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cAtJF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,UADF;AAqKD,CA7OD;;AA+OA,MAAMP,SAAS,GAAGX,UAAU,CAAEwD,KAAD,KAAY;AACvCF,EAAAA,MAAM,EAAE;AACNG,IAAAA,MAAM,EAAED,KAAK,CAACE,OAAN,CAAc,CAAd;AADF,GAD+B;AAIvCC,EAAAA,QAAQ,EAAE;AACRC,IAAAA,WAAW,EAAEJ,KAAK,CAACE,OAAN,CAAc,CAAd;AADL,GAJ6B;AAOvCH,EAAAA,SAAS,EAAE;AACTM,IAAAA,UAAU,EAAEL,KAAK,CAACE,OAAN,CAAc,CAAd;AADH,GAP4B;AAUvCI,EAAAA,SAAS,EAAE;AACTC,IAAAA,QAAQ,EAAE;AADD,GAV4B;AAavCzB,EAAAA,IAAI,EAAE;AACJ0B,IAAAA,OAAO,EAAER,KAAK,CAACE,OAAN,CAAc,CAAd,EAAiB,CAAjB;AADL,GAbiC;AAgBvCO,EAAAA,SAAS,EAAE;AACTC,IAAAA,OAAO,EAAE,MADA;AAETC,IAAAA,QAAQ,EAAE;AAFD,GAhB4B;AAoBvCvB,EAAAA,SAAS,EAAE;AACTiB,IAAAA,UAAU,EAAEL,KAAK,CAACE,OAAN,CAAc,CAAd,CADH;AAETE,IAAAA,WAAW,EAAEJ,KAAK,CAACE,OAAN,CAAc,CAAd,CAFJ;AAGTU,IAAAA,KAAK,EAAE;AAHE;AApB4B,CAAZ,CAAD,CAA5B;AA2BA,eAAe3D,eAAf","sourcesContent":["import React, { useState } from \"react\";\r\nimport {\r\n  Button,\r\n  Icon,\r\n  TextField,\r\n  Paper,\r\n  Typography,\r\n  Divider,\r\n  MenuItem,\r\n} from \"@material-ui/core\";\r\nimport { Box, Heading } from \"@chakra-ui/react\";\r\nimport { Controller, useForm } from \"react-hook-form\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { AlertDialogBox } from \"../helpers/AlertDialogBox\";\r\nimport { useEmployees } from \"./employees/useEmployees\";\r\nimport { useUpdateEmployees } from \"./employees/useUpdateEmployees\";\r\nconst initial_state = {\r\n  name: \"\",\r\n  email: \"\",\r\n  newemail: \"\",\r\n  loginpw: \"\",\r\n};\r\n\r\nconst ConvertEmpEmail = () => {\r\n  const classes = useStyles();\r\n  //const toast = useCustomToast();\r\n  const { employees } = useEmployees();\r\n  const updateEmployee = useUpdateEmployees();\r\n  const [state, setState] = useState(initial_state);\r\n  const [isExit, setIsExit] = useState(false);\r\n  const [isAlertOpen, setIsAlertOpen] = useState(false);\r\n  //const [loginLevel, setLoginLevel] = useRecoilState(loginLevelState);\r\n  const { handleSubmit, control, setValue } = useForm({\r\n    defaultValues: { ...initial_state },\r\n  });\r\n  //const initialValues = Object.values(initial_state).join(\"\");\r\n\r\n  //const {\r\n  //editEmployeeID,\r\n  //employees_loading,\r\n  //deleteEmployee,\r\n  //loadEmployees,\r\n  //setEditEmployeeID,\r\n  //setIsEditingOn,\r\n  //setIsEditingOff,\r\n  //resetSingleEmployee,\r\n  //resetEmployees,\r\n  //getSingleEmployee,\r\n  //} = useEmployeesContext();\r\n\r\n  const handleAlertOpen = () => {\r\n    setIsAlertOpen(true);\r\n  };\r\n\r\n  const handleAlertClose = () => {\r\n    setIsAlertOpen(false);\r\n  };\r\n\r\n  const handleOnConfirm = (data) => {\r\n    console.log(\"confirm\", data);\r\n    //const { id, period, empid } = deletestate;\r\n\r\n    //delete allows detls\r\n    //console.log(\"allowsdetls\", dailyallowsdetls);\r\n    //dailyallowsdetls\r\n    //.filter((f) => f.empid === empid)\r\n    //.forEach((rec) => {\r\n    // if (rec.period === period && rec.empid === empid) {\r\n    //console.log(\"del id\", rec.id);\r\n    //  deleteDailyAllowsDetls(rec.id);\r\n    // }\r\n    //});\r\n    //delete daily allows\r\n    //deleteDailyAllows(id);\r\n    // toast({\r\n    //   title: `Site Allowances has been successfully deleted!`,\r\n    //   status: \"warning\",\r\n    // });\r\n  };\r\n\r\n  const handleSearchEmail = (data) => {\r\n    console.log(\"search data\", data);\r\n    const currentemail = employees\r\n      .filter((r) => r.name === data)\r\n      .map((rec) => rec.email);\r\n    console.log(\"searchemail\", currentemail[0]);\r\n    setValue(\"email\", currentemail[0]);\r\n  };\r\n\r\n  const onSubmit = (data) => {\r\n    const { name } = data;\r\n    const emp = employees && employees.filter((rec) => rec.name === name);\r\n    console.log(\"exist\", emp);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Paper className={classes.root}>\r\n        <Typography variant=\"h5\" component=\"h3\">\r\n          EMPLOYEE EMAIL CONVERSION\r\n        </Typography>\r\n\r\n        <Divider />\r\n        <form onSubmit={handleSubmit(onSubmit)}>\r\n          <div>\r\n            <Controller\r\n              name=\"name\"\r\n              control={control}\r\n              defaultValue={state.name}\r\n              render={({\r\n                field: { onChange, value },\r\n                fieldState: { error },\r\n              }) => {\r\n                return (\r\n                  <TextField\r\n                    label=\"Name\"\r\n                    id=\"margin-normal\"\r\n                    name=\"name\"\r\n                    //value={value}\r\n                    defaultValue={state.name}\r\n                    className={classes.textField}\r\n                    onChange={(e) => {\r\n                      onChange(e.target.value);\r\n                      handleSearchEmail(e.target.value);\r\n                    }}\r\n                    error={!!error}\r\n                    helperText={error ? error.message : null}\r\n                    select\r\n                  >\r\n                    <MenuItem value=\"\">None</MenuItem>\r\n                    {employees &&\r\n                      employees\r\n                        .filter((r) => !r.hasresigned)\r\n                        .sort((a, b) =>\r\n                          a.name > b.name ? 1 : b.name > a.name ? -1 : 0\r\n                        )\r\n                        .map((rec) => {\r\n                          return (\r\n                            <MenuItem key={rec.id} value={rec.name}>\r\n                              {rec.name}\r\n                            </MenuItem>\r\n                          );\r\n                        })}\r\n                  </TextField>\r\n                );\r\n              }}\r\n              rules={{ required: \"Name required\" }}\r\n            />\r\n          </div>\r\n          <div>\r\n            <Controller\r\n              name=\"email\"\r\n              control={control}\r\n              defaultValue={state.email}\r\n              render={({\r\n                field: { onChange, value },\r\n                fieldState: { error },\r\n              }) => {\r\n                return (\r\n                  <TextField\r\n                    label=\"Current Email\"\r\n                    id=\"margin-normal-email\"\r\n                    name=\"email\"\r\n                    type=\"email\"\r\n                    value={value}\r\n                    defaultValue={state.email}\r\n                    className={classes.textField}\r\n                    onChange={onChange}\r\n                    error={!!error}\r\n                    helperText={error ? error.message : null}\r\n                  />\r\n                );\r\n              }}\r\n              rules={{ required: \"Email is required\" }}\r\n            />\r\n          </div>\r\n          <div>\r\n            <Controller\r\n              name=\"newemail\"\r\n              control={control}\r\n              defaultValue={state.newemail}\r\n              render={({\r\n                field: { onChange, value },\r\n                fieldState: { error },\r\n              }) => {\r\n                return (\r\n                  <TextField\r\n                    label=\"New Email\"\r\n                    id=\"margin-normal-email\"\r\n                    name=\"newemail\"\r\n                    type=\"email\"\r\n                    defaultValue={state.newemail}\r\n                    className={classes.textField}\r\n                    onChange={onChange}\r\n                    error={!!error}\r\n                    helperText={error ? error.message : null}\r\n                  />\r\n                );\r\n              }}\r\n              rules={{ required: \"Email is required\" }}\r\n            />\r\n          </div>\r\n          <div>\r\n            <Controller\r\n              name=\"loginpw\"\r\n              control={control}\r\n              defaultValue={state.loginpw}\r\n              render={({\r\n                field: { onChange, value },\r\n                fieldState: { error },\r\n              }) => {\r\n                return (\r\n                  <TextField\r\n                    label=\"Login EMail PW\"\r\n                    id=\"margin-normal-email\"\r\n                    name=\"loginpw\"\r\n                    defaultValue={state.loginpw}\r\n                    className={classes.textField}\r\n                    onChange={onChange}\r\n                    error={!!error}\r\n                    helperText={error ? error.message : null}\r\n                  />\r\n                );\r\n              }}\r\n              rules={{ required: \"Password is required\" }}\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <Button\r\n              type=\"submit\"\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              className={classes.button}\r\n              onClick={handleSubmit(onSubmit)}\r\n            >\r\n              Convert <Icon className={classes.rightIcon}>send</Icon>\r\n            </Button>\r\n          </div>\r\n          {isExit && (\r\n            <Box>\r\n              <Heading size=\"md\" pl={2}>\r\n                Warning! This email already existed!\r\n              </Heading>\r\n            </Box>\r\n          )}\r\n        </form>\r\n        <div>\r\n          <AlertDialogBox\r\n            onClose={handleAlertClose}\r\n            onConfirm={handleOnConfirm}\r\n            isOpen={isAlertOpen}\r\n            title=\"Convert Email\"\r\n          >\r\n            <h2>Are you sure you want to convert ?</h2>\r\n          </AlertDialogBox>\r\n        </div>\r\n      </Paper>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  button: {\r\n    margin: theme.spacing(1),\r\n  },\r\n  leftIcon: {\r\n    marginRight: theme.spacing(1),\r\n  },\r\n  rightIcon: {\r\n    marginLeft: theme.spacing(1),\r\n  },\r\n  iconSmall: {\r\n    fontSize: 20,\r\n  },\r\n  root: {\r\n    padding: theme.spacing(3, 2),\r\n  },\r\n  container: {\r\n    display: \"flex\",\r\n    flexWrap: \"wrap\",\r\n  },\r\n  textField: {\r\n    marginLeft: theme.spacing(1),\r\n    marginRight: theme.spacing(1),\r\n    width: 400,\r\n  },\r\n}));\r\n\r\nexport default ConvertEmpEmail;\r\n"]},"metadata":{},"sourceType":"module"}