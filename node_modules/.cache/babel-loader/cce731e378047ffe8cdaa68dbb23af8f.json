{"ast":null,"code":"import { useState, useCallback } from \"react\";\nimport { useQuery } from \"react-query\";\nimport { hoc_url } from \"../../utils/constants\";\nimport { filterByEmpId } from \"./utils\";\nimport axios from \"axios\";\nimport { queryKeys } from \"../react-query/constants\";\n\nasync function getHocAll(hocid, yearId) {\n  const {\n    data\n  } = await axios.get(`${hoc_url}?all=${hocid}&y=${yearId}`);\n  return data;\n}\n\nexport function useHocAll(empid) {\n  const [filter, setFilter] = useState(\"all\");\n  const [hocallId, setHocallId] = useState(\"\");\n  const [hocallyearId, setHocallYearId] = useState(\"\");\n  const selectFn = useCallback(unfiltered => filterByEmpId(unfiltered, filter), [filter]);\n  const fallback = [];\n  const {\n    data: hocall = fallback\n  } = useQuery([queryKeys.hocall, hocallId, hocallyearId], () => getHocAll(hocallId, hocallyearId), {\n    select: filter !== \"all\" ? selectFn : undefined\n  });\n  return {\n    hocall,\n    filter,\n    setFilter,\n    setHocallId,\n    setHocallYearId\n  };\n}","map":{"version":3,"sources":["D:/react-myprojects/hrms-airtable/src/components/hoc/useHocAll.js"],"names":["useState","useCallback","useQuery","hoc_url","filterByEmpId","axios","queryKeys","getHocAll","hocid","yearId","data","get","useHocAll","empid","filter","setFilter","hocallId","setHocallId","hocallyearId","setHocallYearId","selectFn","unfiltered","fallback","hocall","select","undefined"],"mappings":"AAAA,SAASA,QAAT,EAAmBC,WAAnB,QAAsC,OAAtC;AACA,SAASC,QAAT,QAAyB,aAAzB;AACA,SAASC,OAAT,QAAwB,uBAAxB;AACA,SAASC,aAAT,QAA8B,SAA9B;AAEA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,SAAT,QAA0B,0BAA1B;;AAEA,eAAeC,SAAf,CAAyBC,KAAzB,EAAgCC,MAAhC,EAAwC;AACtC,QAAM;AAAEC,IAAAA;AAAF,MAAW,MAAML,KAAK,CAACM,GAAN,CAAW,GAAER,OAAQ,QAAOK,KAAM,MAAKC,MAAO,EAA9C,CAAvB;AACA,SAAOC,IAAP;AACD;;AAED,OAAO,SAASE,SAAT,CAAmBC,KAAnB,EAA0B;AAC/B,QAAM,CAACC,MAAD,EAASC,SAAT,IAAsBf,QAAQ,CAAC,KAAD,CAApC;AACA,QAAM,CAACgB,QAAD,EAAWC,WAAX,IAA0BjB,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM,CAACkB,YAAD,EAAeC,eAAf,IAAkCnB,QAAQ,CAAC,EAAD,CAAhD;AAEA,QAAMoB,QAAQ,GAAGnB,WAAW,CACzBoB,UAAD,IAAgBjB,aAAa,CAACiB,UAAD,EAAaP,MAAb,CADH,EAE1B,CAACA,MAAD,CAF0B,CAA5B;AAKA,QAAMQ,QAAQ,GAAG,EAAjB;AACA,QAAM;AAAEZ,IAAAA,IAAI,EAAEa,MAAM,GAAGD;AAAjB,MAA8BpB,QAAQ,CAC1C,CAACI,SAAS,CAACiB,MAAX,EAAmBP,QAAnB,EAA6BE,YAA7B,CAD0C,EAE1C,MAAMX,SAAS,CAACS,QAAD,EAAWE,YAAX,CAF2B,EAG1C;AACEM,IAAAA,MAAM,EAAEV,MAAM,KAAK,KAAX,GAAmBM,QAAnB,GAA8BK;AADxC,GAH0C,CAA5C;AAQA,SAAO;AAAEF,IAAAA,MAAF;AAAUT,IAAAA,MAAV;AAAkBC,IAAAA,SAAlB;AAA6BE,IAAAA,WAA7B;AAA0CE,IAAAA;AAA1C,GAAP;AACD","sourcesContent":["import { useState, useCallback } from \"react\";\r\nimport { useQuery } from \"react-query\";\r\nimport { hoc_url } from \"../../utils/constants\";\r\nimport { filterByEmpId } from \"./utils\";\r\n\r\nimport axios from \"axios\";\r\nimport { queryKeys } from \"../react-query/constants\";\r\n\r\nasync function getHocAll(hocid, yearId) {\r\n  const { data } = await axios.get(`${hoc_url}?all=${hocid}&y=${yearId}`);\r\n  return data;\r\n}\r\n\r\nexport function useHocAll(empid) {\r\n  const [filter, setFilter] = useState(\"all\");\r\n  const [hocallId, setHocallId] = useState(\"\");\r\n  const [hocallyearId, setHocallYearId] = useState(\"\");\r\n\r\n  const selectFn = useCallback(\r\n    (unfiltered) => filterByEmpId(unfiltered, filter),\r\n    [filter]\r\n  );\r\n\r\n  const fallback = [];\r\n  const { data: hocall = fallback } = useQuery(\r\n    [queryKeys.hocall, hocallId, hocallyearId],\r\n    () => getHocAll(hocallId, hocallyearId),\r\n    {\r\n      select: filter !== \"all\" ? selectFn : undefined,\r\n    }\r\n  );\r\n\r\n  return { hocall, filter, setFilter, setHocallId, setHocallYearId };\r\n}\r\n"]},"metadata":{},"sourceType":"module"}